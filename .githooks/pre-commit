#!/usr/bin/env bash
# Enforce single-branch policy at commit time.
# What: Blocks any commit made on a branch other than 'main'.
# Why: Your workflow requires that all work happens directly on 'main' and is
#      immediately pushed to GitHub, so we prevent creation/use of other branches.
set -euo pipefail

branch="$(git rev-parse --abbrev-ref HEAD)"
if [[ "$branch" != "main" ]]; then
  echo "Blocked: commits are only allowed on 'main'. Current branch: $branch" >&2
  echo "Switch to 'main' and try again: git checkout main" >&2
  exit 1
fi
